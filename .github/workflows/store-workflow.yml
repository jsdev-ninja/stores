# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy store
on:
   push:
      branches:
         - main
      paths:
         - "apps/store/**"
defaults:
   run:
      working-directory: apps/store # Set the global working directory
jobs:
   store_job:
      runs-on: ubuntu-latest
      steps:
         - uses: actions/checkout@v4

         - name: enter store folder
           run: |
              pwd
              yarn && yarn build

         - uses: FirebaseExtended/action-hosting-deploy@v0
           with:
              repoToken: ${{ secrets.GITHUB_TOKEN }}
              firebaseServiceAccount: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_JSDEV_STORES_PROD }}
              channelId: live
              projectId: jsdev-stores-prod
              entryPoint: apps/store
           env:
              FIREBASE_CLI_EXPERIMENTS: webframeworks
