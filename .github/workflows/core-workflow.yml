# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: publish core package
on:
   push:
      branches:
         - main
      paths:
         - "packages/core/**"
defaults:
   run:
      working-directory: packages/core # Set the global working directory

env:
   NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
   GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
   build:
      runs-on: ubuntu-latest
      steps:
         - uses: actions/checkout@v4
         # Setup .npmrc file to publish to npm
         - uses: actions/setup-node@v4
           with:
              node-version: "20.x"
              registry-url: "https://registry.npmjs.org"
              # Defaults to the user or organization that owns the workflow file
              scope: "@octocat"
         - run: yarn
         - run: yarn publish
           env:
              NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
