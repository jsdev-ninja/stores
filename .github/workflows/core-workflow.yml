# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: publish core package
on:
   push:
      branches:
         - main
      paths:
         - "packages/core/**"
defaults:
   run:
      working-directory: packages/core # Set the global working directory
jobs:
   build_and_publish:
      runs-on: ubuntu-latest
      steps:
         - name: Checkout
           uses: actions/checkout@v4

         - name: List all files
           run: ls -R


         - name: Debug .npmrc
           run: |
            if [ -f .npmrc ]; then
            echo ".npmrc exists in the working directory:"
            cat .npmrc
            else
            echo ".npmrc does not exist in the working directory!"
            fi

         - name: Debug NPM_TOKEN
           run: echo "NPM_TOKEN=${NPM_TOKEN}"
           env:
            NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
               
         - name: build
           run: yarn build
         - name: publish
           run: echo "hello"
           env:
            NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
